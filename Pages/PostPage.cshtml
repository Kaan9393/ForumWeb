@page
@using Microsoft.AspNetCore.Identity;
@using ForumWeb.Areas.Identity.Data;
@model ForumWeb.Pages.PostPageModel
@inject SignInManager<ForumWebUser> SignInManager
@inject UserManager<ForumWebUser> UserManager
@{
}

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

<div class="container center">
    <div class="row">
        <div class="col-lg-12">
            <div>
                <i class="fa fa-globe fa-4x"></i>
            </div>
            <h1>Posts</h1>
            <span></span>
        </div>
    </div> <br /> <br />

</div>



<div>
    @foreach (var post in Model.UserList)
    {
        <img style="width:50px; height:50px; object-fit:cover" src="data:image/*;base64,@(Convert.ToBase64String(post.CreatedUser.ProfileImage))">
        <a asp-page="CommentPage" asp-route-postId="@post.Id">   <h5>@post.Text</h5> </a>
        <p>@post.Date</p>
    }

</div>

@if (SignInManager.IsSignedIn(User))
{

    <h1>Create Posts</h1>
    <form method="post">
        <label asp-for="NewPost.Text">New Post</label> <br />
        <input asp-for="NewPost.Text" />
        <input type="hidden" asp-for="NewPost.User" value="@Model.CurrentUser.Id" />
        <input type="hidden" asp-for="NewPost.SubCategoryId" value="@Model.SubCatId" />
        <input type="submit" value="Save" />
    </form>
}
else
{
    <h2>Logg in to create a Post</h2>
}